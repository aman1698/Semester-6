install.packages("rJava")
install.packages("rCBA")
library(rJava)
library(rCBA)

data<-iris

train<-sapply(iris,as.factor)
train<-data.frame(train,check.names=FALSE)
txns<-as(train,"transactions")

rules=rCBA::fpgrowth(txns,support=0.03,confidence=0.03,maxLength=1,consequent="Species")

predictions<-rCBA::classification(train,rules)
table(predictions)

sum(as.character(train$Species)==as.character(predictions),na.rm=TRUE)/length(predictions)

prunedRules<-rCBA::pruning(train,rules,method="m2cba",parallel=FALSE)
table(predictions)

sum(as.character(train$Species)==as.character(predictions),na.rm=TRUE)/length(predictions)
